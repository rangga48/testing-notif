<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Test OneSignal Push</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- OneSignal SDK -->
  <script src="https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js" defer></script>

  <script>
    window.OneSignalDeferred = window.OneSignalDeferred || [];
    OneSignalDeferred.push(async function(OneSignal) {
      await OneSignal.init({
        appId: "de9223c4-63bb-441c-8d28-cf4116e2ebe6",
        safari_web_id: "web.onesignal.auto.35c3b21f-3634-4ed2-bd52-fd09e2637415",
        notifyButton: { enable: true }
      });

      // Menampilkan status subscription
      const isSubscribed = await OneSignal.User.PushSubscription.optedIn;
      console.log("Is subscribed:", isSubscribed);

      document.getElementById("subscribeBtn").addEventListener("click", async () => {
        await OneSignal.User.PushSubscription.optIn();
        alert("Subscribed! Coba kirim notifikasi dari OneSignal dashboard.");
      });

      document.getElementById("unsubscribeBtn").addEventListener("click", async () => {
        await OneSignal.User.PushSubscription.optOut();
        alert("Unsubscribed!");
      });
    });
  </script>
</head>
<body>
  <h1>OneSignal Test Page</h1>
  <p>Klik tombol di bawah untuk mengatur subscription:</p>
  <button id="subscribeBtn">Subscribe Push</button>
  <button id="unsubscribeBtn">Unsubscribe Push</button>

  <p>ðŸ“Œ Setelah subscribe, buka <a href="https://dashboard.onesignal.com/" target="_blank">OneSignal Dashboard</a> â†’ Messages â†’ New Push untuk mengirim notifikasi test.</p>
</body>
</html>